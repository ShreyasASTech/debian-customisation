# Causes bash to append to history instead of overwriting it so if you start a new terminal, you have old session history
shopt -s histappend
PROMPT_COMMAND='history -a'

# Ignore case on auto-completion
# Note: bind used instead of sticking these in .inputrc
if [[ $iatest -gt 0 ]]; then bind "set completion-ignore-case on"; fi

# Show auto-completion list automatically, without double tab
if [[ $iatest -gt 0 ]]; then bind "set show-all-if-ambiguous On"; fi

# Create and go to the directory
mkdirg ()
{
	mkdir -p "$1"
	cd "$1"
}

# Aliases put by user
alias home='cd ~'
alias cd..='cd ..'
alias ..='cd ..'
alias ll='ls -a -l'
alias cp='cp -i'
alias mv='mv -i'
alias mkdir='mkdir -p'
alias rm='trash -v'
alias h='history'
alias compress='7z a'
alias uncompress='7z e'
alias update='sudo apt update'
alias upgrade='sudo apt upgrade'
alias install='sudo apt install'
alias purge='sudo apt purge'
alias autoremove='sudo apt autoremove'
alias depends='apt depends'
alias rdepends='apt rdepends'
alias edit='micro'
alias sedit='sudo micro'
. /usr/share/autojump/autojump.sh
eval "$(starship init bash)"

# Variables
DATE=$(date -I)

# Colored Man Pages
export MANPAGER="sh -c 'col -bx | batcat -l man -p'"

# DT's Shell Color Scripts
if test -f "/usr/local/bin/colorscript"; then
    colorscript --random
fi

function ix {
    local opts
    local OPTIND
    [ -f "$HOME/.netrc" ] && opts='-n'
    while getopts ":hd:i:n:" x; do
        case $x in
            h) echo "ix [-d ID] [-i ID] [-n N] [opts]"; return;;
            d) $echo curl $opts -X DELETE ix.io/$OPTARG; return;;
            i) opts="$opts -X PUT"; local id="$OPTARG";;
            n) opts="$opts -F read:1=$OPTARG";;
        esac
    done
    shift $(($OPTIND - 1))
    [ -t 0 ] && {
        local filename="$1"
        shift
        [ "$filename" ] && {
            curl $opts -F f:1=@"$filename" $* ix.io/$id
            return
        }
        echo "^C to cancel, ^D to send."
    }
    curl $opts -F f:1='<-' $* ix.io/$id
}
